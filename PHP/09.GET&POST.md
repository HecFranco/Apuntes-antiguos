PHP - Introducción
=========================
[INDICE](https://github.com/HecFranco/Apuntes/blob/master/PHP/00.Indice.md)
---------------------------------------------------------------------------
9. [MÉTODO GET Y POST](https://github.com/HecFranco/Apuntes/blob/master/PHP/08.FuncionesPropias.md#8funciones-definidas-por-el-usuario)</br>

----------------------------------

9.MÉTODO GET Y POST
===================

La principal peculiaridad de la web dinámica, como hemos dicho al principio de este curso, es la posibilidad variar el contenido de las páginas de acuerdo a las peticiones del usuario.
Esta posibilidad se materializa a través de los mecanismos que permiten a los usuarios realizar una petición al servidor web o especificar ciertos parámetros que serán usados po el script PHP para determinar el contenido de la página debe mostrar. 
A modo de ejemplo, podemos imaginar una página cuyo objetivo es mostrar las características de un producto determinado, tomándolos de una base de datos en la que están previamente almacenados los datos de todo un catálogo. En el momento de llamar a la página, tendremos que especificar el código de producto que se mostrará para que el programa recoja los datos de la base de datos y nos muestre ese producto.
En algunos casos, los datos que deben ser transmitidos al programa son muy numerosos: piensa, por ejemplo, en formulario de registro para usuarios, que el nombre, dirección, teléfono, correo electrónico y otros datos personales. En este caso, el script, después de recibirlos, los salvará en la base de datos.
En esta lección no vamos a ver **cómo se almacenan los datos o se recupera de una base de datos** (lo haremos más adelante), sino la manera en que PHP los recibe del usuario. Hay dos formas de pasar los datos a un script: el método GET y el método POST.

**[Regresar al índice](#indice)**

----------------------------------

9.1.Método GET
--------------

El método GET permite **enviar datos recogidos a una página**. Se hace nombrando el nombre de la página seguida de un signo de interrogación y las parejas nombre/valor de los datos que nos interesan. Nombre y valor están separados por un signo igual. Los diferentes pares nombre/valor se separan con el '&'.
Lo veremos más fácil con un ejemplo: imaginemos que tenemos la página producto.php que muestra las características de un producto, una vez le hemos pasado el correspondiente código y categoría del productos, por ejemplo, para ver los datos del producto 'A7' de la categoría '2', enlazaremos con producto.php de la siguiente forma:
```php 
<a href="producto.php?cod=a7&cat=2"></a>```
La cadena que se encuentra después del signo de interrogación, que contiene los nombres y valores de los parámetros, se llama la cadena de consulta. Cuando la página producto.php es llamada de esta forma, tendrá definidas en su interior las variables `$_GET['cod']` y `$_GET['cat']`
```php
// dentro de producto.php
$codigo = $_GET['cod'];
$categoria = $_GET['cat'];
```
De hecho, los valores contenidos en la cadena de consulta se almacena en el `$_GET` de PHP, que es una matriz superglobal ya que también está disponible para las funciones.
Así que, volviendo al ejemplo del catálogo, podemos imaginar tener una página (listado.php, por ejemplo) donde se muestra una tabla con el nombre de cada producto en una línea y, a continuación, en el vínculo que nos permite ver las características de ese producto. En cada fila, este enlace siempre enlazará con la página **producto.php**, asignando cada vez diferentes valores a 'cat' y 'cod'.

**[Regresar al índice](#indice)**

----------------------------------

**Ejercicio 9.1.** Leer y procesar un formulario de contacto.
| formulario.php  |
|-----------------|
```php
<html lang="es">
	<head>
		<title>Ejercicio</title>
		<meta charset = "UTF-8" />
	</head>
	<body>
		<form action="procesar.php" method="get" enctype="text/plain" >
			<label for="nombre">Nombre</label>
			<input type="text" name="nombre" id="nombre" />
			<br/>
			<label for="correo">Email</label>
			<input type="email" name="correo" id="correo" />
			<br/>
			<label for="edad">Dime tu edad</label>
			<input type="number" min="18" max="65" name="edad" id="edad" />
			<br/>
			<label for="fecha">Fecha del Viaje</label>
			<input type="date" name="fecha" id="fecha" />
			<br/><br/>
			<input type="submit" value="Enviar">
		</form>
	</body>
</html>
```
| procesar.php  |
|---------------|
```php
<html lang="es">
	<head>
		<title>Ejercicio</title>
		<meta charset = "UTF-8" />
	</head>
	<body>
		<?php
			$nombre = $_GET['nombre'];
			$correo = $_GET['correo'];
			$edad = $_GET['edad'];
			$fecha = $_GET['fecha'];
			echo"Nos ha contactado el usuario $nombre.<br/>";
			echo"Tiene el email $correo y una edad de $edad edad<br/>";
			echo"Nos indica que quiere viajar el día $fecha<br/>";
		?>
	</body>
</html>
```

**[Regresar al índice](#indice)**

----------------------------------

**Ejercicio 9.2.** Url con parámetros (cómo Google)
|index.php  |
|-----------|
```php
<html lang="es">
	<head>
		<title>Ejercicio</title>
		<meta charset = "UTF-8" />
	</head>
	<body>
		<a href="pagina.php?pag=3&nombre=pedro&edad=25">Ir a la página 3 </a>
	</body>
</html>
```
| pagina.php  |
|-------------|
```php
<html lang="es">
	<head>
		<title>Ejercicio</title>
		<meta charset = "UTF-8" />
	</head>
	<body>
		<?php
		echo "te llamas ".$_GET['nombre'];
		?>
	</body>
</html>
```

**[Regresar al índice](#indice)**

----------------------------------

9.2.Método POST
---------------

El método POST se utiliza con el siguiente caso:
* cuando una página contiene una etiqueta **HTML <form>**,
* uno de sus atributos es method, que puede tener los valores **GET** o **POST**.
    * Si el método es GET, **los datos se pasan en forma de cadena**, a través de la url, como hemos visto antes.
    * Si el método es POST, los **datos se envían de forma que no sean directamente visibles para el usuario**, a través de la petición HTTP que el navegador envía al servidor, mucho más discreto.
Los datos que se pasa a través del método POST se almacenan en el array `$_POST`. Esta matriz, como vimos para `$_GET`, es una matriz superglobal. Veamos un ejemplo:
```php
<form action="elabora.php" method="post">
 <input type="text" name="nombre">
 <input type="checkbox" name="nuevo" value="si">
 <input type="submit" name="submit" value="Enviar">
</form>
```
Este módulo sólo contiene un cuadro de texto denominado 'nombre' y una casilla de verificación llamada 'nueva', cuyo valor se define como "sí". Finalmente tenemos el botón que envía los datos a través del método POST, a la página elabora.php .
Esta página dispondrá de la variable $_POST['nombre'] que contendrá el valor que el usuario haya escrito en el campo de texto; Además, si se selecciona la casilla de verificación, recibirá la variable $_POST ['nuevo'] con valor 'yes'. Si la casilla de verificación no está seleccionada por el usuario, la variable correspondiente será indefinida.

**[Regresar al índice](#indice)**

----------------------------------

**[Regresar al índice](#indice)**

----------------------------------

**[Regresar al índice](#indice)**

----------------------------------
