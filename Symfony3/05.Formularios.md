5.FORMULARIOS
=============

* Para crear formularios con Symfony 3 es necesario abrir la consola, y acceder al directorio donde tengamos el proyecto Symfony3 para posteriormente lanzar el comando:
```php
cd C:/wamp64/www/symfony
```
* Posteriormente lanzamos el comando que generará el formulario dentro del Bundle (AppBundle) con la misma estructura de una entidad designada (Curso).
```php
php bin/console doctrine:generate:form AppBundle:Curso
```
Ahora tendremos un fichero nuevo en el directorio `\src\AppBundle\Form\` de nuestro Bundle. En este caso se denominará `CursoType.php`.

El siguiente paso consiste en definir los tipos de campos y submit que habrá dentro del formulario, para ello añadiremos dentro de `CursoType.php` las siguientes líneas.
```php
// Usamos los diferentes tipo de campo
use Symfony\Component\Form\Extension\Core\Type\TextType;
use Symfony\Component\Form\Extension\Core\Type\SubmitType;
use Symfony\Component\Form\Extension\Core\Type\TextareaType;
```
En este caso el archivo quedará así:

| \src\AppBunlde\Form\CursoType.php |
|-----------------------------------|

```php
<?php
 
namespace AppBundle\Form;
 
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolver;
 
// Usamos los diferentes tipo de campo
use Symfony\Component\Form\Extension\Core\Type\TextType;
use Symfony\Component\Form\Extension\Core\Type\SubmitType;
use Symfony\Component\Form\Extension\Core\Type\TextareaType;
 
class CursoType extends AbstractType
{
    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
// Definimos el nombre del campo, el tipo y las propiedades
            ->add('titulo', TextType::class)
            ->add('descripcion', TextareaType::class)
        ->add('precio', TextType::class,array(
                    "label"=>"Precio:"
                ))
            ->add('Guardar', SubmitType::class)
        ;
    }
     
    /**
     * @param OptionsResolver $resolver
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'AppBundle\Entity\Curso'
        ));
    }
}
```

Ahora podemos crear una acción en el controlador.

| \src\AppBunlde\Controller\PruebasController.php |
|-------------------------------------------------|

```php
<?php

namespace AppBundle\Controller;

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;   //Componente que gestiona los enrutamientos

class PruebasController extends Controller
{
    public function formAction(){
        $curso=new Curso();
        $form = $this->createForm(CursoType::class, $curso);
        return $this->render('AppBundle:Pruebas:form.html.twig', array(
            'form'=>$form->createView()
        ));
    }
}
```

Mostramos el formulario en la vista

| \src\AppBunlde\Resources\views\pruebas\form.html.twig |
|-------------------------------------------------------|

```twig
<h2>Formulario con Symfony3</h2>
{{form_start(form,{'action':'','method':'POST'})}}
{{form_end(form)}}
```

Para que funcione debidamente es necesario generar un enrutamiento dentro de `\src\AppBunlde\Resources\config\routing.yml`

| \src\AppBunlde\Resources\config\routing.yml |
|---------------------------------------------|

```yml
pruebas_form:
    path:    /pruebas/form/
    # indicamos el controlador utilizado "Pruebas" dentro del Bundle "AppBundle" y la acción "formAction"
    defaults: { _controller: AppBundle:Pruebas:form}
```
Con esto ya tendríamos un formulario creado con Symfony 3.
