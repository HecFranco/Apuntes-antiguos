4.BASE DE DATOS Y DOCTRINE
==========================

Doctrine es un mapeador de objetos-relacional (ORM) escrito en PHP que proporciona una capa de persistencia para objetos PHP. Es una capa de abstracción que se sitúa justo encima de un SGBD (sistema de gestión de bases de datos).
Este sistema permite el cambio de base de datos sin cambio de código.
* Para acceder a la configuración de la base de datos es necesario entrar en `app\config\parameters.yml`.

Para los ejemplos se trabajará con una base de datos que dispone de dos tablas:
* Producto (id, name, description, price)
* Usuario (id, name, surname, description, email, password, image, alternative)

-------------------------------------

4.1.Generar Entidades
---------------------
Es necesario generar las entidades que gestionaran la base de datos para ello, hay que seguir estos pasos.

* Iniciar la consola CygWin64, y una vez dentro acceder a la carpeta del proyecto, en este caso:
```php
cd C:/wamp64/www/symfony
```
* Posteriormente indicaremos a la consola que tiene que generar dentro de la url indicada unos ficheros `.xml` con los datos de la BBDD.
```php
php bin/console doctrine:mapping:convert xml ./src/AppBundle/Resources/doctrine/metadta/orm --from-database --force
```
* Ahora se importaran los metadatos en `.yml` para configurarlos.
```php
php bin/console doctrine:mapping:import AppBundle yml
```
Así se habrá generado una estructura base con la entidad dentro del directorio `src\AppBundle\Resources\config\doctrine\` con los archivos `Producto.orm.yml` y `Usuarios.orm.yml` que equivale a cada una de las tablas de la base de datos.

* Generar entidades de interacción directa con el código.
```php
php bin/console doctrine:generate:entities AppBundle
```
Así se habrán generado las entidades de la base de datos dentro del directorio `src\AppBundle\Entity\` con los archivos `Producto.php` y `Usuario.php` que equivale a cada una de las tablas de la base de datos.
