4.Ejemplo de Proyecto
----------------------
1. **Crearemos el proyecto Symfony**, dentro de la carpeta dónde queremos alojar el proyecto (`c:\>wamp64\www\>` en nuestro caso por tener instalado *Wamp64*) escribiremos el siguiente comando : `composer create-project symfony/framework-standard-edition micms`.  (Ver documentación oficial [aquí](https://symfony.com/doc/current/setup.html#creating-symfony-applications-with-composer)).
----------------------------------

  *Nota<sup>1</sup>*: Durante el proceso de configuración indicaremos el nombre de la base de datos: `database_name (symfony):` en el cual responderemos *micms*.

  *Nota<sup>2</sup>*:  Ejecutar `composer dump-autoload` para ejecutar la función **autoload**.

----------------------------------

2. Podemos **probar** el correcto funcionamiento de la **instalación** ejecutando dentro de la carpeta del proyecto (`c:\>wamp64\www\micms\>`) el comando `php bin/console server:run`, para posteriormente acceder a la url indicada (`127.0.0.1:8000`) (Ver documentación oficial [aquí](https://symfony.com/doc/current/setup.html#running-the-symfony-application))
3. A continuación **crearemos la Base de datos**, desde la carpeta del proyecto (`c:\>wamp64\www\micms\>`) mediante el siguiente comando `php bin/console doctrine:database:create` (Ver documentación oficial [aquí](https://symfony.com/doc/current/doctrine.html#configuring-the-database)).

----------------------------------

  *Nota<sup>1</sup>*: Para poder utilizar el comando anterior es necesario tener iniciado un servidor local (**Wamp** o **Xampp**).

  *Nota<sup>2</sup>*: Podremos visualizar mediante **phpMyAdmin** la base de datos a traves de un servidor virtual tipo **Wamp64** o **Xampp**, a través de la url [localhost/phpmyadmin](http://localhost/phpmyadmin/).

----------------------------------

4. **Definimos el Bundle** a usar mediante `php bin/console generate:bundle --namespace=Pixelpro/MiCMSBundle` (Ver documentación oficial [aquí](https://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_bundle.html)).
   * *Are you planning on sharing this bundle across multiple applications? [no]:* (¿Está planeando compartir este paquete en varias aplicaciones?)
   * *Give your bundle a descriptive name, like BlogBundle. Bundle name [Pixelpro/HolaMundoBundle]:* (Dé a su paquete un nombre descriptivo, como BlogBundle. Nombre del paquete [Pixelpro / HolaMundoBundle]:)
   * *Bundle name [PixelproHolaMundoBundle]:* (Nombre del Bundle)
   * *Target Directory [src/]:* (Carpeta dónde se alojará)
   * *Configuration format (annotation, yml, xml, php) [annotation]:* (Formato de configuración (anotación, yml, xml, php) [anotación]:) (*Nota*: **Se recomienda usar yml**)
5. Volvemos a **probar el correcto funcionamiento** de la aplicación mediante `php bin/console server:run` e introduciendo la url `127.0.0.1:8000`, trás la cual nos aparecerá en pantalla *Hello Wolrd!*.

---------------------------------------------------------
**POSIBLE FALLO**
Puede dar error al ejecutarlo, lanzando el siguiente mensaje **Fatal error: Class 'Pixelpro\HolaMundoBundle\PixelproHolaMundoBundle' not found in C:\wamp64\www\symfony.test\app\AppKernel.php on line 19**

En este caso el error se encontraba dentro de `C:\wamp64\www\symfony.test\composer.json`, dónde había que modificar la siguiente línea 

| C:\wamp64\www\symfony.test\composer.json |
|------------------------------------------|

```php
    "autoload": {
        "psr-4": {
            "AppBundle\\": "src/AppBundle",
            "": "src/"
        },
        "classmap": [ "app/AppKernel.php", "app/AppCache.php" ]
    }
```

por esta otra 

```php
"autoload": {
        "psr-4": {
            "": "src/"
        },
        "classmap": [ "app/AppKernel.php", "app/AppCache.php" ]
    }
```

y ejecutar `composer dump-autoload` para ejecutar la función **autoload**. 

---------------------------------------------------------

4.1.Ruta
---------
* El enrutador se encuentra dentro de `src\Pixelpro\MiCMSBundle\Resources\config\routing.yml`. Dentro de el encontraremos el siguiente código:

| src\Pixelpro\MiCMSBundle\Resources\config\routing.yml |
|-------------------------------------------------------|

```yml
# Nombre del enrutador
pixelpro_mi_cms_homepage:
    # Url o dirección relativa del enrutador
    path:     /
    # Bundle + Controlador + Acción
    # En este ejemplo:
    # Bundle: PixelproMiCMSBundle
    # Controller: Default
    # Action: index
    defaults: { _controller: PixelproMiCMSBundle:Default:index }
```

Un resumen de la posible configuración de los enrutadores sería:

4.2.Controlador
---------------

En este caso el controlador se encontraría en `src\Pixelpro\MiCMSBundle\Controller` y sería el siguiente:

| src\Pixelpro\MiCMSBundle\Controller\DefaultController.php |
|-----------------------------------------------------------|

```php
<?php

namespace Pixelpro\MiCMSBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class DefaultController extends Controller
{
    public function indexAction()
    {
        return $this->render('PixelproMiCMSBundle:Default:index.html.twig');
    }
}
```

Un resumen completo de comando sería:


4.3.Extender Vistas
-------------------

Extendemos la vista `src\Pixelpro\miCMSBundle\Resources\view\Default\index.html.twig` mediante el archivo base `app\Resources\view\base.html.twig`.

| src\Pixelpro\miCMSBundle\Resources\view\Default\index.html.twig |
|-----------------------------------------------------------------|

```twig
{# Extiendo la vista con el siguiente código #}
{% extends '::base.html.twig' %} 
{# Añado el contenido dentro de body encerrandolo entre las dos etiquetas {% block body %}{% endblock %} #}
    {% block body %}
        <p> Página Principal </p>
    {% endblock %}
```

| app\Resources\view\base.html.twig |
|-----------------------------------|

```twig
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" href="{{ asset('img/favicon.ico') }}">
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}
          <!-- Bootstrap core CSS -->
          <link href="{{ asset('css/bootstrap.min.css') }}" rel="stylesheet">
          <!-- Custom styles for this template -->
          <link href="{{ asset('css/jumbotron.css') }}" rel="stylesheet">
        {% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#">Disabled</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
              <div class="dropdown-menu" aria-labelledby="dropdown01">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
      {% block body %}{% endblock %}
      {% block javascripts %}
          <script src="{{ asset('js/bootstrap.js')}}"></script>
      {% endblock %}
    </body>
</html>
```

Sería necesario copiar dentro de la carpeta `web` los diferentes archivos *js, css,...*. En caso de usar Bootstrap sería algo así:

4.4.Entity e interfaz de Usuario
--------------------------------

Usaremos el código `php bin/console doctrine:generate:entity`, lo cual iniciará un generador que nos ayudará a configurar el nuevo **Entity**. (Ver documentación oficial [aquí](https://symfony.com/doc/2.7/security/entity_provider.html#content_wrapper))

<table>
  <tr> 
    <td> 
     Welcome to the Doctrine2 entity generator.<br>                     
      This command helps you generate Doctrine2 entities. <br>          
      First, you need to give the entity name you want to generate. <br>
      You must use the shortcut notation like AcmeBlogBundle:Post.  
    </td>
    <td> 
      Bienvenido al generador de entidades Doctrine2<br>
      Este comando le ayuda a generar entidades de Doctrine2.<br>
      First, you need to give the entity name you want to generate.<br>
      Debe utilizar la notación de acceso directo como <br>
      AcmeBlogBundle: Post.
    </td>
  </tr>
  <tr> 
    <td>
      The Entity shortcut name: <i>PixelpromiCMSBundle:User</i>
    </td>
    <td>
      El nombre de método abreviado de entidad: <br>
     <i>PixelpromiCMSBundle:User</i>
    </td>
  </tr>
  <tr>
    <td>
      Determine the format to use for the mapping information.
    </td>
    <td>
      Determine el formato a utilizar para la información de <br>
     asignación.
    </td>
  </tr>  
    <tr>
    <td>
      Configuration format (yml,xml,php,or annotation)<br>
     [annotation]:<i>yml</i>
    </td>
    <td>
      Formato de configuración (yml,xml,php, o anotación) <br>
     [anotación]:<i>yml</i>
    </td>
  </tr> 
  <tr>
    <td>
      Instead of starting with a blank entity, you can add <br>
      some fields now.</br>
      Note that the primary key will be added automatically <br>
     (named id).</br>
      Available types: array, simple_array, json_array, <br>
      object, boolean, integer, smallint, bigint, string, <br>
      text, datetime, datetimetz, date, time, decimal, <br>
      float, binary, blob, guid.
    </td>
    <td>
      En lugar de comenzar con una entidad en blanco, <br>
      puede agregar algunos campos ahora. </br>
      Tenga en cuenta que la clave principal se agregará <br>
      automáticamente (identificador con nombre). <br>
      Tipos disponibles: array, simple_array, json_array, <br>
      object, boolean, entero, smallint, bigint, cadena, <br>
      texto, datetime, datetimetz, fecha, hora, decimal, <br>
      flotador, binario, mancha, guid.
    </td>
  </tr> 
  <tr>
     <td>
      New field name (press <return> to stop adding <br>
      fields): username<br>
      Field type [string]:<br>
      Field length [255]: 35<br>
      Is nullable [false]:<br>
      Unique [false]:<br>
    </td>
    <td>
      Nuevo nombre de campo (presione <volver> para dejar <br>
      de agregar campos): <br>
      nombre de usuario <br>
      Tipo de campo [cadena]: <br>
      Longitud del campo [255]: 35 <br>
      Es anulable [false]: <br>
      Único [falso]: <br>
    </td>
  </tr> 
  <tr>
     <td>
      New field name (press <return> to stop adding <br>
      fields): password<br>
      Field type [string]:<br>
      Field length [255]: 80<br>
      Is nullable [false]:<br>
      Unique [false]:<br>
     </td>
     <td>
      Nuevo nombre de campo (presione <volver> para dejar<br>
      de agregar campos): password <br>
      Tipo de campo [cadena]: <br>
      Longitud del campo [255]: 80 <br>
      Es anulable [false]: <br>
      Único [falso]: <br>
     </td>
  </tr> 
  <tr>
      <td>      
       New field name (press <return> to stop adding fields):<br>
       Entity generation<br>
      </td>
      <td>
       Nuevo nombre de campo (presione <volver> para dejar <br>
       de agregar campos): <br>
       Generación de entidades <br>
      </td>
  </tr> 
</table>

Finalmente se crearán los archivos que definen la entidad, y podremos empezar a trabajar con ellos.

```
 created .\src\Pixelpro\MiCMSBundle/Entity/
 created .\src\Pixelpro\MiCMSBundle/Entity/User.php
 created .\src\Pixelpro\MiCMSBundle/Resources/config/doctrine/
 created .\src\Pixelpro\MiCMSBundle/Resources/config/doctrine/User.orm.yml
> Generating entity class C:\wamp64\www\micms\src\Pixelpro\MiCMSBundle\Entity\User.php: OK!
> Generating repository class C:\wamp64\www\micms\src\Pixelpro\MiCMSBundle\Repository\UserRepository.php: OK!
> Generating mapping file C:\wamp64\www\micms\src\Pixelpro\MiCMSBundle\Resources\config\doctrine\User.orm.yml: OK!
Everything is OK! Now get to work :).
```

Seleccionaremos ante la cuestión *The Entity shortcut name:* el nombre del **Bundle** sobre el cual crearemos el entity (`PixelpromiCMSBundle`), seguido de `:` (dos puntos) más el tipo de **CRUD** a usar, en este caso al ser para gestionar *usuarios* usaremos `:user`. Finalmente será `PixelpromiCMSBundle:User`.


